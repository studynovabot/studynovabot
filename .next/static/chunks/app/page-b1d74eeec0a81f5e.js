(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1009:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});var a=s(3915),r=s(5317);let n=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyBWqeEO_-9OWKKX_MIolTwnvPS0F5j4ANY",authDomain:"studynovabot.firebaseapp.com",projectId:"studynovabot",storageBucket:"studynovabot.firebasestorage.app",messagingSenderId:"250481817155",appId:"1:250481817155:web:160f30bdb36bbc375dc6f6"});(0,r.aU)(n)},6767:(e,t,s)=>{Promise.resolve().then(s.bind(s,9231))},8007:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),r=s(2115),n=s(5695),i=s(3004),l=s(1009);function o(){let[e,t]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),u=(0,n.useRouter)(),h=(0,i.xI)(l.y),f=async t=>{t.preventDefault(),m("");try{c?await (0,i.eJ)(h,e,s):await (0,i.x9)(h,e,s),u.push("/")}catch(e){m(e.message)}},g=async()=>{m("");try{let e=new i.HF;await (0,i.df)(h,e),u.push("/")}catch(e){m(e.message)}};return(0,a.jsxs)("div",{style:{maxWidth:400,margin:"4rem auto",padding:24,background:"#222",borderRadius:12},children:[(0,a.jsx)("h2",{children:c?"Register":"Login"}),(0,a.jsxs)("form",{onSubmit:f,style:{display:"flex",flexDirection:"column",gap:12},children:[(0,a.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>o(e.target.value),required:!0}),(0,a.jsx)("button",{type:"submit",children:c?"Register":"Login"})]}),(0,a.jsxs)("button",{onClick:g,style:{marginTop:12,background:"#fff",color:"#222",border:"1px solid #ccc",borderRadius:4,padding:8,cursor:"pointer",fontWeight:500},children:[(0,a.jsx)("span",{style:{marginRight:8,fontSize:20},children:"\uD83D\uDD35"})," Sign in with Google"]}),(0,a.jsx)("button",{onClick:()=>d(e=>!e),style:{marginTop:8,background:"none",color:"#1cc592",border:"none",cursor:"pointer"},children:c?"Already have an account? Login":"No account? Register"}),x&&(0,a.jsx)("div",{style:{color:"red",marginTop:8},children:x})]})}},9231:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),r=s(2115),n=s(3004),i=s(1009),l=s(5695),o=s(8007),c=s(8240),d=s(4823),x=s(1828);function m(e){var t;let{user:s}=e,[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[g,p]=(0,r.useState)(!1),[b,j]=(0,r.useState)("all"),[y,v]=(0,r.useState)([{id:"all",name:"All chats",icon:"\uD83D\uDCC1",chats:[]},{id:"study",name:"Study",icon:"\uD83D\uDCDA",chats:[]},{id:"code",name:"Code",icon:"\uD83D\uDCBB",chats:[]},{id:"image",name:"Generate Image",icon:"\uD83D\uDDBC️",chats:[]}]),[w,N]=(0,r.useState)(null),[k,S]=(0,r.useState)(!1),[C,I]=(0,r.useState)(null),E=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null==(e=E.current)||e.scrollIntoView({behavior:"smooth"})},[m]),(0,r.useEffect)(()=>{if(!n)return;let e=e=>{"Escape"===e.key&&i(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]),(0,r.useEffect)(()=>{n?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open")},[n]);let A=e=>{var t;o(e),null==(t=D.current)||t.focus()},O=e=>{j(e);let t=y.find(t=>t.id===e);t&&t.chats.length>0?(u(t.chats[t.chats.length-1]),f(!1)):(u([]),f(!0))},T=async e=>{if(e&&e.preventDefault(),!l.trim())return;let t=[...m,{role:"user",content:l}];u(e=>[...e,{role:"user",content:l}]),o(""),f(!1),p(!0);let s=!k&&/(?:\bcreate\b|\brecreate\b|\bmake\b|\bgenerate\b|\bdraw\b|\bimage\b)/i.test(l),a=/(?:edit|change|fix|adjust|modify|improve|upgrade|should|more\s+cute|cute)/i.test(l),r=[...t];if(a&&w){S(!0);let e="".concat(w,", ").concat(l);try{let t=await fetch("/api/genImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e})}),s=await t.json();if(s.image){let t="data:image/png;base64,".concat(s.image);N(e),I(t),u(e=>[...e,{role:"assistant",content:"![Generated image](".concat(t,")\n\nI've updated the image based on your request.")}])}else s.error?u(e=>[...e,{role:"assistant",content:"[Image generation failed: ".concat(s.error,"]")}]):u(e=>[...e,{role:"assistant",content:"[Image generation failed]"}])}catch(t){let e=t instanceof Error?t.message:JSON.stringify(t);u(t=>[...t,{role:"assistant",content:"[Image generation failed: ".concat(e,"]")}])}S(!1),p(!1);return}if(s){S(!0);try{let e=await fetch("/api/genImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:l})}),t=await e.json();if(null==t?void 0:t.image){let e="data:image/png;base64,".concat(t.image);N(l),I(e),u(t=>[...t,{role:"assistant",content:"![Generated image](".concat(e,")\n\nHere's the image you requested.")}])}else(null==t?void 0:t.error)?u(e=>[...e,{role:"assistant",content:"[Image generation failed: ".concat(t.error,"]")}]):u(e=>[...e,{role:"assistant",content:"[Image generation failed or invalid image]"}])}catch(t){let e=t instanceof Error?t.message:JSON.stringify(t);u(t=>[...t,{role:"assistant",content:"[Image generation failed: ".concat(e,"]")}])}S(!1),p(!1);return}let n=m.filter(e=>"user"===e.role||"assistant"===e.role).slice(-3).map(e=>({role:e.role,content:e.content.replace(/!\[.*?]\(.*?\)/g,"[image]")}));n.push({role:"user",content:l});try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n})}),t=await e.json();if(!e.ok){let e="Unknown error occurred";t&&t.error?"string"==typeof t.error?e=t.error:"object"==typeof t.error&&(e=JSON.stringify(t.error)):"object"==typeof t&&(e=JSON.stringify(t)),u(t=>[...t,{role:"assistant",content:"Error: ".concat(e)}]),p(!1);return}let s=t.reply||"No response from AI.",a=[...r,{role:"assistant",content:s}];u(a),v(e=>e.map(e=>e.id===b||"all"===e.id&&"all"!==b?{...e,chats:[...e.chats,a]}:e)),p(!1)}catch(t){console.error("Error occurred:",t);let e=t instanceof Error&&t.message||"Unknown error occurred";u(t=>[...t,{role:"assistant",content:"Error: ".concat(e)}]),p(!1)}};return(0,a.jsxs)("div",{className:"chat-container",children:[(0,a.jsx)("button",{className:"hamburger","aria-label":n?"Close sidebar":"Open sidebar",onClick:()=>i(e=>!e),children:n?"✖":"☰"}),n&&(0,a.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:999},onClick:()=>i(!1),"aria-label":"Close sidebar overlay"}),(0,a.jsxs)("aside",{className:"sidebar".concat(n?" open":""," bg-[#0f0f10] border-r border-[#1f1f23] flex flex-col justify-between"),children:[(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 px-4 py-4 border-b border-[#1f1f23]",children:(0,a.jsx)("span",{className:"font-bold text-lg text-white tracking-wide",children:"Study Nova"})}),(0,a.jsxs)("div",{className:"px-3 py-3",children:[(0,a.jsxs)("button",{onClick:()=>{u([]),f(!0),o(""),I(null),N(null)},className:"w-full bg-[#2662d9] text-white rounded-md py-2 px-3 flex items-center justify-center gap-2 mb-3 hover:bg-[#2258c0] transition font-medium",children:[(0,a.jsx)("span",{className:"text-sm",children:"＋"})," New Chat"]}),(0,a.jsxs)("div",{className:"relative mb-3",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#666]",children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,a.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),(0,a.jsx)("input",{className:"w-full rounded-md pl-10 pr-3 py-2 bg-[#1a1a1c] text-white placeholder:text-[#666] outline-none border border-[#333] focus:border-[#2662d9] transition-colors",placeholder:"Search chats..."})]})]}),(0,a.jsxs)("div",{className:"folder-list px-2 overflow-y-auto flex-1",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-[#666] px-2 py-2 uppercase tracking-wider",children:"Folders"}),y.map(e=>(0,a.jsxs)("div",{className:"folder flex items-center px-3 py-2 cursor-pointer rounded-md gap-2 text-[#ddd] mb-1 hover:bg-[#1a1a1c] ".concat(b===e.id?"bg-[#1a1a1c] text-white":""),onClick:()=>O(e.id),children:[(0,a.jsx)("span",{className:"folder-icon text-lg",children:e.icon}),(0,a.jsx)("span",{className:"folder-name text-sm",children:e.name})]},e.id))]})]}),(0,a.jsx)("div",{className:"flex flex-col p-3 gap-2 border-t border-[#1f1f23]",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-2 rounded-md hover:bg-[#1a1a1c] cursor-pointer",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#2662d9] flex items-center justify-center text-white font-medium",children:(null==s||null==(t=s.name)?void 0:t.charAt(0))||"U"}),(0,a.jsx)("div",{className:"text-sm text-[#ddd]",children:"Settings"})]})})]}),(0,a.jsxs)("div",{className:"main-content flex-1 flex flex-col bg-[#0a0a0b]",children:[(0,a.jsxs)("header",{className:"chat-header flex items-center justify-between px-6 py-3 border-b border-[#1f1f23]",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"Current Chat"})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-[#1a1a1c] px-3 py-1 rounded-md border border-[#333] cursor-pointer",children:[(0,a.jsx)("span",{className:"text-xs text-[#ddd]",children:"GPT-4 Turbo"}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#666]",children:(0,a.jsx)("polyline",{points:"6 9 12 15 18 9"})})]})})]}),(0,a.jsx)("main",{className:"main-container flex-1 flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 w-full flex flex-col",children:["image"!==b&&h&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full select-none px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,a.jsx)("div",{className:"rounded-full bg-[#1a1a1c] text-white w-20 h-20 flex items-center justify-center mb-4 text-2xl font-extrabold border border-[#333] shadow-lg",children:(0,a.jsx)("span",{className:"font-extrabold tracking-wide",style:{fontFamily:"Inter, sans-serif"},children:"Nova"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",style:{fontFamily:"Inter, sans-serif"},children:"Study Nova"}),(0,a.jsx)("p",{className:"text-[#888] text-center max-w-md mb-8",children:"Your AI-powered study assistant. Ask questions, create courses, and learn anything."})]}),(0,a.jsxs)("div",{className:"w-full max-w-2xl grid grid-cols-1 md:grid-cols-2 gap-3 mb-8",children:[(0,a.jsxs)("button",{className:"bg-[#1a1a1c] hover:bg-[#222] text-white rounded-lg p-4 text-left border border-[#333] transition",onClick:()=>A("Teach me why the sky is blue"),children:[(0,a.jsx)("div",{className:"font-medium",children:"Teach me"}),(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"why the sky is blue"})]}),(0,a.jsxs)("button",{className:"bg-[#1a1a1c] hover:bg-[#222] text-white rounded-lg p-4 text-left border border-[#333] transition",onClick:()=>A("Create a course about the periodic table"),children:[(0,a.jsx)("div",{className:"font-medium",children:"Create a course"}),(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"about the periodic table"})]}),(0,a.jsxs)("button",{className:"bg-[#1a1a1c] hover:bg-[#222] text-white rounded-lg p-4 text-left border border-[#333] transition",onClick:()=>A("Help me study for my biology exam"),children:[(0,a.jsx)("div",{className:"font-medium",children:"Help me study"}),(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"for my biology exam"})]}),(0,a.jsxs)("button",{className:"bg-[#1a1a1c] hover:bg-[#222] text-white rounded-lg p-4 text-left border border-[#333] transition",onClick:()=>A("Explain how the internet works"),children:[(0,a.jsx)("div",{className:"font-medium",children:"Explain how"}),(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"the internet works"})]})]})]}),(0,a.jsx)("div",{className:"chat-interface flex flex-col flex-1 w-full max-w-3xl mx-auto ".concat(h?"":"px-4"),children:(0,a.jsxs)("div",{className:"messages-container flex-1 overflow-y-auto pb-4",children:["image"!==b&&!h&&m.map((e,t)=>{var r;return(0,a.jsx)("div",{className:"border-b border-[#1f1f23] py-6 first:pt-8",children:(0,a.jsx)("div",{className:"max-w-3xl mx-auto flex gap-4",children:"assistant"===e.role?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#1a1a1c] border border-[#333] flex items-center justify-center text-white text-xs",children:"AI"}),(0,a.jsx)("div",{className:"flex-1 text-[#ddd] text-sm leading-relaxed",children:"string"==typeof e.content?(0,a.jsx)(c.oz,{remarkPlugins:[d.A],components:{img:e=>{let{node:t,...s}=e,r={...s};return""===r.src&&(r.src=null),(0,a.jsx)("img",{...r,className:"max-w-full h-auto rounded-lg my-4"})},code:e=>{let{node:t,...s}=e;return(0,a.jsx)("code",{...s,className:"bg-[#1a1a1c] text-[#ddd] px-2 py-1 rounded text-xs"})},pre:e=>{let{node:t,...s}=e;return(0,a.jsx)("pre",{...s,className:"bg-[#1a1a1c] text-[#ddd] p-3 rounded-md my-3 overflow-auto text-xs"})}},children:e.content}):(0,a.jsx)("div",{className:"text-red-400",children:"Error: Invalid message format"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#2662d9] flex items-center justify-center text-white text-xs",children:(null==s||null==(r=s.name)?void 0:r.charAt(0))||"U"}),(0,a.jsx)("div",{className:"flex-1 text-white text-sm",children:e.content})]})})},t)}),"image"===b&&C&&(0,a.jsx)("div",{className:"border-b border-[#1f1f23] py-6",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto flex gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#1a1a1c] border border-[#333] flex items-center justify-center text-white text-xs",children:"AI"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("img",{src:C,alt:"Generated image",className:"max-w-full h-auto rounded-lg my-4"})})]})}),(0,a.jsx)("div",{ref:E})]})}),(0,a.jsxs)("div",{className:"sticky bottom-0 w-full bg-gradient-to-t from-[#0a0a0b] to-transparent pt-6 pb-4",children:[(0,a.jsx)("form",{onSubmit:T,className:"max-w-3xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"image"===b?"Generate an image...":"Send a message...",value:l,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T())},className:"w-full bg-[#1a1a1c] text-white rounded-lg pl-4 pr-12 py-3 outline-none border border-[#333] focus:border-[#2662d9] transition-colors",disabled:g,ref:D}),(0,a.jsx)("button",{type:"submit",disabled:!l.trim()||g,className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-md bg-[#2662d9] text-white disabled:opacity-50 disabled:bg-[#333]",children:g?(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,a.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})}),"image"!==b&&!h&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-3 max-w-3xl mx-auto px-4",children:[(0,a.jsx)("button",{className:"text-xs text-[#888] hover:text-white bg-[#1a1a1c] hover:bg-[#222] px-3 py-1.5 rounded-md border border-[#333] transition-colors",onClick:()=>A("Create an image of a "),children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:"\uD83C\uDFA8"})," Create image"]})}),(0,a.jsx)("button",{className:"text-xs text-[#888] hover:text-white bg-[#1a1a1c] hover:bg-[#222] px-3 py-1.5 rounded-md border border-[#333] transition-colors",onClick:()=>A("Help me brainstorm ideas for a "),children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:"\uD83D\uDCA1"})," Brainstorm"]})}),(0,a.jsx)("button",{className:"text-xs text-[#888] hover:text-white bg-[#1a1a1c] hover:bg-[#222] px-3 py-1.5 rounded-md border border-[#333] transition-colors",onClick:()=>A("Summarize this text: "),children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{children:"\uD83D\uDCDD"})," Summarize"]})})]})]})]})})]}),(0,a.jsx)(x.j,{})]})}function u(){let[e,t]=(0,r.useState)(!1),[s,c]=(0,r.useState)(null),d=(0,l.useRouter)();return((0,r.useEffect)(()=>{let e=(0,n.xI)(i.y);return(0,n.hg)(e,e=>{c(e||null),t(!0)})},[d]),e)?s?(0,a.jsx)(m,{user:s}):(0,a.jsx)(o.default,{}):(0,a.jsx)("div",{style:{textAlign:"center",marginTop:"4rem",color:"#fff"},children:"Checking authentication..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,765,306,951,441,684,358],()=>t(6767)),_N_E=e.O()}]);