(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(5155),n=s(2115);function i(e){let{message:t,animate:s}=e,[i,r]=n.useState([]),c=n.useMemo(()=>(function(e){let t=e.split(/\r?\n/).filter(e=>""!==e.trim()),s=[];for(let e of t){let t=e.match(/!\[.*?\]\((.*?)\)/)||e.match(/(https?:\/\/\S+\.(jpg|jpeg|png|gif))/);if(t){s.push({type:"image",url:t[1]||t[0]});continue}/^\d+[.)]/.test(e)?s.push({type:"text",content:"\uD83D\uDD22 ".concat(e.replace(/^\d+[.)]\s*/,""))}):/^[-*•]/.test(e)?s.push({type:"text",content:"\uD83D\uDC49 ".concat(e.replace(/^[-*•]\s*/,""))}):s.push({type:"text",content:"\uD83E\uDD16 ".concat(e)})}return s})(t),[t]);return n.useEffect(()=>{if(!s){let e=[];for(let t of c)"text"===t.type?e.push(t.content):e.push({type:"image",url:t.url});r(e);return}r([]);let e=0;!function t(){if(e>=c.length)return;let s=c[e];"text"===s.type?r(e=>[...e,s.content]):r(e=>[...e,{type:"image",url:s.url}]),e++,setTimeout(t,400)}()},[t,s]),(0,a.jsx)("div",{children:i.map((e,t)=>"string"==typeof e?(0,a.jsx)("div",{style:{whiteSpace:"pre-line",marginBottom:4},children:e},t):(0,a.jsx)("div",{style:{margin:"10px 0"},children:(0,a.jsx)("img",{src:e.url,alt:"Generated visual",style:{maxWidth:"100%",borderRadius:8}})},t))})}function r(){let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)([]),[c,l]=(0,n.useState)(!0),[o,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)("all"),[m,p]=(0,n.useState)([{id:"all",name:"All chats",icon:"\uD83D\uDCC1",chats:[]},{id:"study",name:"Study",icon:"\uD83D\uDCDA",chats:[]},{id:"code",name:"Code",icon:"\uD83D\uDCBB",chats:[]}]),g=(0,n.useRef)(null),f=(0,n.useRef)(null),x=e=>{var s;t(e),null==(s=f.current)||s.focus()},j=e=>{h(e);let t=m.find(t=>t.id===e);t&&t.chats.length>0?(r(t.chats[t.chats.length-1]),l(!1)):(r([]),l(!0))},N=async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(a&&a.preventDefault(),!e.trim())return;let n=[...s,{role:"user",content:e}];r(n),t(""),l(!1),d(!0);try{let t=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n})}),a=await t.json();if(!t.ok){let e="string"==typeof a.error?a.error:JSON.stringify(a.error);throw Error(e||"Unknown error occurred")}let i=a.reply||"No response from AI.";if(/image|draw|picture|visual|photo|generate|create.*image/i.test(e)||/\[image\]/i.test(i)){let t=await fetch("/api/genImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e})}),s=await t.json();s&&s.image&&(i+="\n![Generated Image](".concat(s.image,")"))}let c={role:"assistant",content:i},l=[...s,c];r(l),p(e=>e.map(e=>e.id===u||"all"===e.id&&"all"!==u?{...e,chats:[...e.chats,l]}:e)),d(!1)}catch(t){console.error("Error occurred:",t);let e=t instanceof Error&&t.message||"Unknown error occurred";r(t=>[...t,{role:"assistant",content:"Error: ".concat(e)}]),d(!1)}};return(0,n.useEffect)(()=>{g.current&&s.length>0&&g.current.scrollIntoView({behavior:"smooth"})},[s]),(0,a.jsxs)("div",{className:"chat-container",children:[(0,a.jsxs)("aside",{className:"sidebar",children:[(0,a.jsx)("div",{className:"sidebar-header",children:(0,a.jsx)("h2",{children:"Study Nova"})}),(0,a.jsx)("div",{className:"folder-list",children:m.map(e=>(0,a.jsxs)("div",{className:"folder ".concat(u===e.id?"active":""),onClick:()=>j(e.id),children:[(0,a.jsx)("span",{className:"folder-icon",children:e.icon}),(0,a.jsx)("span",{className:"folder-name",children:e.name}),e.chats.length>0&&(0,a.jsx)("span",{className:"chat-count",children:e.chats.length})]},e.id))})]}),(0,a.jsxs)("div",{className:"main-content",children:[(0,a.jsx)("header",{className:"chat-header",children:(0,a.jsx)("h1",{className:"site-title",children:"Study Nova Bot"})}),(0,a.jsxs)("main",{className:"main-container",children:[(0,a.jsxs)("div",{className:"chat-interface".concat(c?" welcome-mode":""),children:[(0,a.jsxs)("div",{className:"messages-container",children:[c?(0,a.jsx)("div",{className:"welcome-container",children:(0,a.jsx)("h1",{children:"What can I help with?"})}):null,s.map((e,t)=>(0,a.jsx)("div",{className:"message ".concat("user"===e.role?"user-message":"bot-message"),children:(0,a.jsx)("div",{className:"message-content",children:"assistant"===e.role?(0,a.jsx)(i,{message:e.content,animate:t===s.length-1&&o}):e.content})},t)),(0,a.jsx)("div",{ref:g})]}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),N()},className:"input-container",children:(0,a.jsxs)("div",{className:"input-wrapper",children:[(0,a.jsx)("input",{type:"text",placeholder:"Send a message...",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},className:"chat-input",disabled:o,ref:f}),(0,a.jsx)("button",{type:"submit",disabled:!e.trim()||o,className:"send-button",children:o?"...":"→"})]})})]}),(0,a.jsxs)("div",{className:"suggestions",children:[(0,a.jsxs)("button",{className:"suggestion-btn",onClick:()=>x("Create an image of a beautiful sunset over mountains"),children:[(0,a.jsx)("span",{className:"icon",children:"\uD83C\uDFA8"})," Create image"]}),(0,a.jsxs)("button",{className:"suggestion-btn",onClick:()=>x("Help me brainstorm ideas for a science fiction story"),children:[(0,a.jsx)("span",{className:"icon",children:"\uD83D\uDCA1"})," Brainstorm"]}),(0,a.jsxs)("button",{className:"suggestion-btn",onClick:()=>x("Help me write a professional email to schedule a meeting"),children:[(0,a.jsx)("span",{className:"icon",children:"✍️"})," Help me write"]}),(0,a.jsxs)("button",{className:"suggestion-btn",onClick:()=>x("Summarize this text: [paste your text here]"),children:[(0,a.jsx)("span",{className:"icon",children:"\uD83D\uDCDD"})," Summarize text"]})]})]})]})]})}},2380:(e,t,s)=>{Promise.resolve().then(s.bind(s,1057))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(2380)),_N_E=e.O()}]);