(()=>{var e={};e.id=974,e.ids=[974],e.modules={597:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\cascade\\\\CascadeProjects\\\\windsurf-project\\\\studynovabot-final\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\cascade\\CascadeProjects\\windsurf-project\\studynovabot-final\\app\\page.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1539:()=>{},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1678:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(687),n=s(3210),a=s.n(n);s(4366),s(3897);var i=s(6189),o=s(6501);function l({message:e,animate:t}){let[s,n]=a().useState([]);return a().useMemo(()=>(function(e){let t=e.split(/\r?\n/).filter(e=>""!==e.trim()),s=[];for(let e of t){let t=e.match(/!\[.*?]\((.*?)\)/)||e.match(/(https?:\/\/\S+\.(jpg|jpeg|png|gif))/);if(t){s.push({type:"image",url:t[1]||t[0]});continue}/^\d+[.)]/.test(e)?s.push({type:"text",content:`ðŸ”¢ ${e.replace(/^\d+[.)]\s*/,"")}`}):/^[-*â€¢]/.test(e)?s.push({type:"text",content:`ðŸ‘‰ ${e.replace(/^[-*â€¢]\s*/,"")}`}):s.push({type:"text",content:`ðŸ¤– ${e}`})}return s})(e),[e]),(0,r.jsx)("div",{children:s.map((e,t)=>"string"==typeof e?(0,r.jsx)("div",{style:{whiteSpace:"pre-line",marginBottom:4},children:e},t):"string"==typeof e.url&&e.url.startsWith("data:image/")?(0,r.jsx)("div",{style:{margin:"10px 0"},children:(0,r.jsx)("img",{src:e.url,alt:"Generated visual",style:{maxWidth:"100%",borderRadius:8}})},t):(0,r.jsx)("div",{style:{color:"red",marginBottom:4},children:"[Image generation failed or invalid image]"},t))})}function c({user:e}){let[t,s]=(0,n.useState)(!1),[a,i]=(0,n.useState)(""),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[p,m]=(0,n.useState)(!1),[h,g]=(0,n.useState)("all"),[x,f]=(0,n.useState)([{id:"all",name:"All chats",icon:"\uD83D\uDCC1",chats:[]},{id:"study",name:"Study",icon:"\uD83D\uDCDA",chats:[]},{id:"code",name:"Code",icon:"\uD83D\uDCBB",chats:[]}]),v=(0,n.useRef)(null),b=(0,n.useRef)(null),j=e=>{i(e),b.current?.focus()},y=e=>{g(e);let t=x.find(t=>t.id===e);t&&t.chats.length>0?(c(t.chats[t.chats.length-1]),u(!1)):(c([]),u(!0))},N=async e=>{if(e&&e.preventDefault(),!a.trim())return;let t=[...o.filter(e=>!e.content.includes("data:image/")),{role:"user",content:a}];c([...o,{role:"user",content:a}]),i(""),u(!1),m(!0);let s=/image|draw|picture|visual|photo|generate|create.*image|\[image\]/i.test(a),r=/more cute|improve|upgrade|make.*better|add|change|modify/i.test(a),n=[...t];if(r){let e=[...o].reverse().find(e=>"user"===e.role&&/image|draw|picture|visual|photo|generate|create.*image|\[image\]/i.test(e.content));if(e){let t=`${e.content}, ${a}`;try{let e=await fetch("/api/genImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:t})}),s=await e.json();n=s?.image?[...o,{role:"user",content:a},{role:"assistant",content:`![Generated Image](${s.image})`}]:s?.error?[...o,{role:"user",content:a},{role:"assistant",content:`[Image generation failed: ${s.error}]`}]:[...o,{role:"user",content:a},{role:"assistant",content:"[Image generation failed or invalid image]"}],c(n)}catch(e){c(n=[...o,{role:"user",content:a},{role:"assistant",content:`[Image generation failed: ${e}]`}])}m(!1);return}}if(s){try{let e=await fetch("/api/genImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:a})}),t=await e.json();n=t?.image?[...n,{role:"assistant",content:`![Generated Image](${t.image})`}]:t?.error?[...n,{role:"assistant",content:`[Image generation failed: ${t.error}]`}]:[...n,{role:"assistant",content:"[Image generation failed or invalid image]"}],c(n)}catch(e){c(n=[...n,{role:"assistant",content:`[Image generation failed: ${e}]`}])}m(!1);return}try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t})}),s=await e.json();if(!e.ok){let e="string"==typeof s.error?s.error:JSON.stringify(s.error);throw Error(e||"Unknown error occurred")}let r=s.reply||"No response from AI.",a=[...n,{role:"assistant",content:r}];c(a),f(e=>e.map(e=>e.id===h||"all"===e.id&&"all"!==h?{...e,chats:[...e.chats,a]}:e)),m(!1)}catch(t){console.error("Error occurred:",t);let e=t instanceof Error&&t.message||"Unknown error occurred";c(t=>[...t,{role:"assistant",content:`Error: ${e}`}]),m(!1)}};return(0,r.jsxs)("div",{className:"chat-container",children:[(0,r.jsx)("button",{className:"hamburger","aria-label":t?"Close sidebar":"Open sidebar",onClick:()=>s(e=>!e),children:t?"âœ–":"â˜°"}),t&&(0,r.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:999},onClick:()=>s(!1),"aria-label":"Close sidebar overlay"}),(0,r.jsxs)("aside",{className:`sidebar${t?" open":""}`,children:[(0,r.jsx)("div",{className:"sidebar-header",children:(0,r.jsx)("h2",{children:"Study Nova"})}),(0,r.jsx)("div",{className:"folder-list",children:x.map(e=>(0,r.jsxs)("div",{className:`folder ${h===e.id?"active":""}`,onClick:()=>y(e.id),children:[(0,r.jsx)("span",{className:"folder-icon",children:e.icon}),(0,r.jsx)("span",{className:"folder-name",children:e.name}),e.chats.length>0&&(0,r.jsx)("span",{className:"chat-count",children:e.chats.length})]},e.id))})]}),(0,r.jsxs)("div",{className:"main-content",children:[(0,r.jsx)("header",{className:"chat-header",children:(0,r.jsx)("h1",{className:"site-title",children:"Study Nova Bot"})}),(0,r.jsxs)("main",{className:"main-container",children:[(0,r.jsxs)("div",{className:`chat-interface${d?" welcome-mode":""}`,children:[(0,r.jsxs)("div",{className:"messages-container",children:[d&&(0,r.jsx)("div",{className:"welcome-container",children:(0,r.jsx)("h1",{children:"What can I help with?"})}),o.map((e,t)=>(0,r.jsx)("div",{className:`message ${"user"===e.role?"user-message":"bot-message"}`,children:(0,r.jsx)("div",{className:"message-content",children:"assistant"===e.role?(0,r.jsx)(l,{message:e.content,animate:t===o.length-1&&p}):e.content})},t)),(0,r.jsx)("div",{ref:v})]}),(0,r.jsx)("form",{onSubmit:N,className:"input-container",children:(0,r.jsxs)("div",{className:"input-wrapper",children:[(0,r.jsx)("input",{type:"text",placeholder:"Send a message...",value:a,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},className:"chat-input",disabled:p,ref:b}),(0,r.jsx)("button",{type:"submit",disabled:!a.trim()||p,className:"send-button",children:p?"...":"â†’"})]})})]}),(0,r.jsxs)("div",{className:"suggestions",children:[(0,r.jsxs)("button",{className:"suggestion-btn",onClick:()=>j("Create an image of a beautiful sunset over mountains"),children:[" ",(0,r.jsx)("span",{className:"icon",children:"\uD83C\uDFA8"})," Create image "]}),(0,r.jsxs)("button",{className:"suggestion-btn",onClick:()=>j("Help me brainstorm ideas for a science fiction story"),children:[" ",(0,r.jsx)("span",{className:"icon",children:"\uD83D\uDCA1"})," Brainstorm "]}),(0,r.jsxs)("button",{className:"suggestion-btn",onClick:()=>j("Help me write a professional email to schedule a meeting"),children:[" ",(0,r.jsx)("span",{className:"icon",children:"âœï¸"})," Help me write "]}),(0,r.jsxs)("button",{className:"suggestion-btn",onClick:()=>j("Summarize this text: [paste your text here]"),children:[" ",(0,r.jsx)("span",{className:"icon",children:"\uD83D\uDCDD"})," Summarize text "]})]})]})]})]})}function d(){let[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(null);return((0,i.useRouter)(),e)?s?(0,r.jsx)(c,{user:s}):(0,r.jsx)(o.default,{}):(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"4rem",color:"#fff"},children:"Checking authentication..."})}},1820:e=>{"use strict";e.exports=require("os")},2704:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3316:(e,t,s)=>{Promise.resolve().then(s.bind(s,1678))},3496:e=>{"use strict";e.exports=require("http2")},3873:e=>{"use strict";e.exports=require("path")},3897:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});var r=s(7989),n=s(5535);let a=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyBWqeEO_-9OWKKX_MIolTwnvPS0F5j4ANY",authDomain:"studynovabot.firebaseapp.com",projectId:"studynovabot",storageBucket:"studynovabot.firebasestorage.app",messagingSenderId:"250481817155",appId:"1:250481817155:web:160f30bdb36bbc375dc6f6"});(0,n.aU)(a)},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5611:()=>{},5700:(e,t,s)=>{Promise.resolve().then(s.bind(s,597))},6501:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(687),n=s(3210),a=s(6189),i=s(4366),o=s(3897);function l(){let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(""),m=(0,a.useRouter)(),h=(0,i.xI)(o.y),g=async t=>{t.preventDefault(),p("");try{c?await (0,i.eJ)(h,e,s):await (0,i.x9)(h,e,s),m.push("/")}catch(e){p(e.message)}},x=async()=>{p("");try{let e=new i.HF;await (0,i.df)(h,e),m.push("/")}catch(e){p(e.message)}};return(0,r.jsxs)("div",{style:{maxWidth:400,margin:"4rem auto",padding:24,background:"#222",borderRadius:12},children:[(0,r.jsx)("h2",{children:c?"Register":"Login"}),(0,r.jsxs)("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:12},children:[(0,r.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>l(e.target.value),required:!0}),(0,r.jsx)("button",{type:"submit",children:c?"Register":"Login"})]}),(0,r.jsxs)("button",{onClick:x,style:{marginTop:12,background:"#fff",color:"#222",border:"1px solid #ccc",borderRadius:4,padding:8,cursor:"pointer",fontWeight:500},children:[(0,r.jsx)("span",{style:{marginRight:8,fontSize:20},children:"\uD83D\uDD35"})," Sign in with Google"]}),(0,r.jsx)("button",{onClick:()=>d(e=>!e),style:{marginTop:8,background:"none",color:"#1cc592",border:"none",cursor:"pointer"},children:c?"Already have an account? Login":"No account? Register"}),u&&(0,r.jsx)("div",{style:{color:"red",marginTop:8},children:u})]})}},6971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(5239),n=s(8088),a=s(8170),i=s.n(a),o=s(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,597)),"E:\\cascade\\CascadeProjects\\windsurf-project\\studynovabot-final\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"E:\\cascade\\CascadeProjects\\windsurf-project\\studynovabot-final\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}],d=["E:\\cascade\\CascadeProjects\\windsurf-project\\studynovabot-final\\app\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7366:e=>{"use strict";e.exports=require("dns")},7910:e=>{"use strict";e.exports=require("stream")},8014:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>i});var r=s(7413);s(2704);var n=s(6696),a=s.n(n);let i={title:"StudyNova Bot",description:"An intelligent study assistant powered by AI"};function o({children:e}){return(0,r.jsxs)("html",{lang:"en",className:a().className,children:[(0,r.jsxs)("head",{children:[(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"})]}),(0,r.jsx)("body",{children:e})]})}},8354:e=>{"use strict";e.exports=require("util")},8645:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},8917:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9771:e=>{"use strict";e.exports=require("process")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,398,740],()=>s(6971));module.exports=r})();